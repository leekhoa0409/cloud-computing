<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>AWS Rekognition</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background: #f8f9fa; }
    .section-title { font-weight: 600; font-size: 1.3rem; margin-top: 30px; }
    .card { border-radius: 12px; }
    .preview-img { max-height: 250px; border-radius: 10px; margin-top: 10px; }
    .divider { border-top: 2px dashed #ccc; margin: 40px 0; }
  </style>
</head>
<body>

<div class="container py-5">
  <h2 class="text-center mb-4">Phân tích hình ảnh với AWS Rekognition</h2>

  <div class="card shadow p-4 mb-5">
    <h4 class="section-title mb-3">Phân tích hình ảnh</h4>
    <form action="/analyze" method="post" enctype="multipart/form-data">
      <div class="mb-3">
        <label class="form-label fw-bold">Chọn ảnh:</label>
        <input type="file" name="file" accept="image/*" required class="form-control" onchange="previewImage(event, 'preview1')">
        <img id="preview1" class="preview-img d-none" alt="Preview Image">
      </div>

      <div class="mb-3">
        <label class="form-label fw-bold">Chọn tính năng muốn phân tích:</label><br>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="checkbox" name="features" value="labels" id="labels">
          <label class="form-check-label" for="labels">Detect Labels</label>
        </div>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="checkbox" name="features" value="faces" id="faces">
          <label class="form-check-label" for="faces">Detect Faces</label>
        </div>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="checkbox" name="features" value="text" id="text">
          <label class="form-check-label" for="text">Detect Text</label>
        </div>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="checkbox" name="features" value="celebrities" id="celeb">
          <label class="form-check-label" for="celeb">Recognize Celebrities</label>
        </div>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="checkbox" name="features" value="ppe" id="ppe">
          <label class="form-check-label" for="ppe">Detect PPE</label>
        </div>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="checkbox" name="features" value="moderation" id="mod">
          <label class="form-check-label" for="mod">Moderation Labels</label>
        </div>
      </div>

      <button type="submit" class="btn btn-primary mt-2">Phân tích ảnh</button>
    </form>
  </div>

  <div class="divider"></div>

  <div class="card shadow p-4">
    <h4 class="section-title mb-3">Compare Faces (So sánh khuôn mặt)</h4>

    <form action="/compare-faces" method="post" enctype="multipart/form-data">
      <div class="row">
        <div class="col-md-6 text-center">
          <label class="form-label fw-bold">Ảnh gốc</label>
          <input type="file" class="form-control mb-3" name="source" accept="image/*" required onchange="previewImage(event, 'preview2')">
          <img id="preview2" class="preview-img d-none">
        </div>
        <div class="col-md-6 text-center">
          <label class="form-label fw-bold">Ảnh cần so sánh</label>
          <input type="file" class="form-control mb-3" name="target" accept="image/*" required onchange="previewImage(event, 'preview3')">
          <img id="preview3" class="preview-img d-none">
        </div>
      </div>

      <div class="text-center mt-3">
        <button type="submit" class="btn btn-success">So sánh khuôn mặt</button>
      </div>
    </form>
  </div>
</div>
<script>
function previewImage(event, id) {
  const img = document.getElementById(id);
  img.src = URL.createObjectURL(event.target.files[0]);
  img.classList.remove("d-none");
}
</script>

</body>
</html>
